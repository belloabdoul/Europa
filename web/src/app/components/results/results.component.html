<ag-grid-angular
  class="full-height ag-theme-material-auto-dark"
  [columnDefs]="colDefs"
  [rowData]="similarFiles"
  enableBrowserTooltips
  (cellFocused)="setSelectedRow($event)"
  (keyup.arrowup)="showContentIfPossible()"
  (keyup.arrowdown)="showContentIfPossible()"
  (cellClicked)="showContentIfPossible()"
  (cellDoubleClicked)="openFileInDefaultApplication($event)"
  [rowBuffer]="0"
  (cellContextMenu)="showContextMenu($event)"
  [cdkContextMenuTriggerFor]="contextMenu"
  #results
/>

<ng-template #contextMenu>
  <ion-list lines="full" cdkMenu>
    <ion-item
      class="ion-text-nowrap"
      (click)="openFileInDefaultApplication($event)"
      cdkMenuItem
    >
      <ion-label> Open in default application </ion-label>
      <ion-icon name="apps"></ion-icon>
    </ion-item>
    <ion-item class="ion-text-nowrap" (click)="openFileLocation()" cdkMenuItem>
      <ion-label> Open file location </ion-label>
      <ion-icon name="folder-open"></ion-icon>
    </ion-item>
  </ion-list>
</ng-template>

<ion-footer class="ion-text-center ion-justify-content-around">
  <ion-toolbar>
    <ion-grid>
      <ion-row>
        @if(step1Text == ''){
        <ion-col>No search in progress</ion-col>
        } @else{ @if(step1Text.includes('cancelled')){
        <ion-col>{{ step1Text }}</ion-col>
        } @else{
        <ion-col
          >{{ step1Text }} : {{ step1Progress }} hashes processed</ion-col
        >
        @if(step2Text != ''){
        <ion-col
          >{{ step2Text }} : {{ step2Progress }} hashes processed</ion-col
        >
        }
        <ion-col
          >{{ step3Text }} : {{ step3Progress }} hashes processed</ion-col
        >
        } }
      </ion-row>
    </ion-grid>
  </ion-toolbar>
</ion-footer>
